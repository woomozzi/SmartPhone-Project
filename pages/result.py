import streamlit as st
import pandas as pd
import matplotlib.pyplot as plt
from powerbiclient import Report, models
from IPython.display import IFrame
from PIL import Image
import io
import openai 
import requests
import os



# ------------ ì ìˆ˜ ë³€ìˆ˜ ì´ˆê¸°í™” ì½”ë“œ-------------

if 'total_score' not in st.session_state:
    st.session_state.total_score = 0

if 'total_score_adult' not in st.session_state:
    st.session_state.total_score_adult = 0

# --------------------ë³€ìˆ˜ ì„ ì–¸ ì½”ë“œ-----------------

total_score = st.session_state.total_score
total_score_adult = st.session_state.total_score_adult
sex = st.session_state.sex
age = int(st.session_state.age)
name = st.session_state.name
# ----------------ì ìˆ˜ íŒë³„ í•¨ìˆ˜----------------------------------------

def overdose_kids(score) :
    if score >= 28:
       st.header('{}(ì´)ëŠ” ê³ ìœ„í—˜êµ°ìœ¼ë¡œ íŒì •ë˜ì—ˆìŠµë‹ˆë‹¤! ğŸ˜¢'.format(name))
       st.header('ì„¤ë¬¸ì ìˆ˜ëŠ” {}ì  ì…ë‹ˆë‹¤.'.format(score))
       st.markdown("---")
    elif score >= 24 and score <= 27:
        st.header('{}(ì´)ëŠ” ì ì¬ì ìœ„í—˜êµ°ìœ¼ë¡œ íŒì •ë˜ì—ˆìŠµë‹ˆë‹¤! ğŸ˜¶'.format(name))
        st.header('ì„¤ë¬¸ì ìˆ˜ëŠ” {}ì  ì…ë‹ˆë‹¤.'.format(score))
        st.markdown("---")
    else :
        st.header('{}(ì´)ëŠ” ì¼ë°˜êµ°ìœ¼ë¡œ íŒì •ë˜ì—ˆìŠµë‹ˆë‹¤! ğŸ˜'.format(name))
        st.header('ì„¤ë¬¸ì ìˆ˜ëŠ” {}ì  ì…ë‹ˆë‹¤.'.format(score))
        st.markdown("---")

def overdose_adult_teen(score) :
    if score >= 31:
       st.header('ë‹¹ì‹ ì€ ê³ ìœ„í—˜êµ°ìœ¼ë¡œ íŒì •ë˜ì—ˆìŠµë‹ˆë‹¤! ğŸ˜¢')
       st.header('ì„¤ë¬¸ì ìˆ˜ëŠ” {}ì  ì…ë‹ˆë‹¤.'.format(score))
       st.markdown("---")
    elif score >= 23 and score <= 30:
        st.header('ë‹¹ì‹ ì€ ì ì¬ì ìœ„í—˜êµ°ìœ¼ë¡œ íŒì •ë˜ì—ˆìŠµë‹ˆë‹¤! ğŸ˜¶')
        st.header('ì„¤ë¬¸ì ìˆ˜ëŠ” {}ì  ì…ë‹ˆë‹¤.'.format(score))
        st.markdown("---")
    else :
        st.header('ë‹¹ì‹ ì€ ì¼ë°˜êµ°ìœ¼ë¡œ íŒì •ë˜ì—ˆìŠµë‹ˆë‹¤! ğŸ˜')
        st.header('ì„¤ë¬¸ì ìˆ˜ëŠ” {}ì  ì…ë‹ˆë‹¤.'.format(score))
        st.markdown("---")

def overdose_adult(score) :
    if score >= 29:
       st.header('ë‹¹ì‹ ì€ ê³ ìœ„í—˜êµ°ìœ¼ë¡œ íŒì •ë˜ì—ˆìŠµë‹ˆë‹¤! ğŸ˜¢')
       st.header('ì„¤ë¬¸ì ìˆ˜ëŠ” {}ì  ì…ë‹ˆë‹¤.'.format(score))
       st.markdown("---")
    elif score >= 24 and score <= 28:
        st.header('ë‹¹ì‹ ì€ ì ì¬ì ìœ„í—˜êµ°ìœ¼ë¡œ íŒì •ë˜ì—ˆìŠµë‹ˆë‹¤! ğŸ˜¶')
        st.header('ì„¤ë¬¸ì ìˆ˜ëŠ” {}ì  ì…ë‹ˆë‹¤.'.format(score))
        st.markdown("---")
    else :
        st.header('ë‹¹ì‹ ì€ ì¼ë°˜êµ°ìœ¼ë¡œ íŒì •ë˜ì—ˆìŠµë‹ˆë‹¤! ğŸ˜')
        st.header('ì„¤ë¬¸ì ìˆ˜ëŠ” {}ì  ì…ë‹ˆë‹¤.'.format(score))
        st.markdown("---")

def overdose_adult_senior(score) :
    if score >= 28:
       st.header('ë‹¹ì‹ ì€ ê³ ìœ„í—˜êµ°ìœ¼ë¡œ íŒì •ë˜ì—ˆìŠµë‹ˆë‹¤! ğŸ˜¢')
       st.header('ì„¤ë¬¸ì ìˆ˜ëŠ” {}ì  ì…ë‹ˆë‹¤.'.format(score))
       st.markdown("---")
    elif score >= 24 and score <= 27:
        st.header('ë‹¹ì‹ ì€ ì ì¬ì ìœ„í—˜êµ°ìœ¼ë¡œ íŒì •ë˜ì—ˆìŠµë‹ˆë‹¤! ğŸ˜¶')
        st.header('ì„¤ë¬¸ì ìˆ˜ëŠ” {}ì  ì…ë‹ˆë‹¤.'.format(score))
        st.markdown("---")
    else :
        st.header('ë‹¹ì‹ ì€ ì¼ë°˜êµ°ìœ¼ë¡œ íŒì •ë˜ì—ˆìŠµë‹ˆë‹¤! ğŸ˜')
        st.header('ì„¤ë¬¸ì ìˆ˜ëŠ” {}ì  ì…ë‹ˆë‹¤.'.format(score))
        st.markdown("---")

# ----------------ëŒ€ì‹œë³´ë“œ í•¨ìˆ˜-------------------------------------------------

def dash_kids():
    embed_code = """
<iframe title="project2_ìœ ì•„ë™_ê²°ê³¼" width="800" height="400" src="https://app.powerbi.com/view?r=eyJrIjoiMzIwNzFiYTctYzdlNy00YmExLTgyZGUtMGJhMjdiZWIzMTgwIiwidCI6ImU0ZmVkY2NkLWRlOWMtNGUxMS04NDY3LWI0Y2FjMTliYzIzMyJ9" frameborder="0" allowFullScreen="true"></iframe>
"""
    st.subheader('[ ìë…€ì˜ ë‚˜ì´ì¸ {}ì„¸ê°€ í¬í•¨ëœ êµ¬ê°„ì˜ ì„¤ë¬¸ì¡°ì‚¬ í˜„í™© ]'.format(age))
    st.markdown(embed_code, unsafe_allow_html=True)
def dash_adult_teens():
    embed_code = """
<iframe title="project2_ì²­ì†Œë…„_ê²°ê³¼" width="800" height="400" src="https://app.powerbi.com/view?r=eyJrIjoiMzA5YmQ4ZTAtZTNkOC00NzllLWEzNGEtOTI2ZDA3NjVmYmJjIiwidCI6ImU0ZmVkY2NkLWRlOWMtNGUxMS04NDY3LWI0Y2FjMTliYzIzMyJ9" frameborder="0" allowFullScreen="true"></iframe>
"""
    st.subheader('[ ë‹¹ì‹ ì˜ ë‚˜ì´ì¸ {}ì„¸ê°€ í¬í•¨ëœ êµ¬ê°„ì˜ ì„¤ë¬¸ì¡°ì‚¬ í˜„í™© ]'.format(age))
    st.markdown(embed_code, unsafe_allow_html=True)
def dash_adult():
    embed_code = """
<iframe title="project2_ì„±ì¸_ê²°ê³¼" width="800" height="400" src="https://app.powerbi.com/view?r=eyJrIjoiZWNmMmYyNmMtNmYzMC00NWVlLThhZDgtNWM0N2E1OGE4ODU3IiwidCI6ImU0ZmVkY2NkLWRlOWMtNGUxMS04NDY3LWI0Y2FjMTliYzIzMyJ9" frameborder="0" allowFullScreen="true"></iframe>
"""
    st.subheader('[ ë‹¹ì‹ ì˜ ë‚˜ì´ì¸ {}ì„¸ê°€ í¬í•¨ëœ êµ¬ê°„ì˜ ì„¤ë¬¸ì¡°ì‚¬ í˜„í™© ]'.format(age))
    st.markdown(embed_code, unsafe_allow_html=True)
def dash_adult_senior():
    embed_code = """
<iframe title="project2_60ëŒ€_ê²°ê³¼" width="800" height="400" src="https://app.powerbi.com/view?r=eyJrIjoiYmQ1MTQ1MmMtYzllNC00NDA1LWE4YmItMTVkMjUyMjg4OTg5IiwidCI6ImU0ZmVkY2NkLWRlOWMtNGUxMS04NDY3LWI0Y2FjMTliYzIzMyJ9" frameborder="0" allowFullScreen="true"></iframe>
"""
    st.subheader('[ ë‹¹ì‹ ì˜ ë‚˜ì´ì¸ {}ì„¸ê°€ í¬í•¨ëœ êµ¬ê°„ì˜ ì„¤ë¬¸ì¡°ì‚¬ í˜„í™© ]'.format(age))
    st.markdown(embed_code, unsafe_allow_html=True)

#----------------------------------ì†”ë£¨ì…˜ í•¨ìˆ˜--------------------------------------

def solution_kids_overdose():
    st.markdown("---")
    st.subheader("""
ìŠ¤ë§ˆíŠ¸í° ì¤‘ë…ì—ëŠ” ì—¬ëŸ¬ê°€ì§€ ì´ìœ ê°€ ìˆì§€ë§Œ ìë…€ì˜ ìŠ¤ë§ˆíŠ¸í° ì´ìš© íšŸìˆ˜ì™€ ì‹œê°„ì„ ì œí•œí•  ê²ƒì„ ì¶”ì²œë“œë¦½ë‹ˆë‹¤.\n
ê·¸ëŸ¼ ìŠ¤ë§ˆíŠ¸í° ê³¼ì˜ì¡´ì—ì„œ ë©€ì–´ì§ˆ ìˆ˜ ìˆì„ ê²ƒì…ë‹ˆë‹¤.\n
ë‹¤ìŒì€ ì°¸ê³ í•˜ì‹¤ ìˆ˜ ìˆëŠ” ë°©ë²• ëª‡ê°€ì§€ë¥¼ ì•Œë ¤ë“œë¦¬ê² ìŠµë‹ˆë‹¤. ë„ì›€ì´ ë˜ì—ˆìœ¼ë©´ ì¢‹ê² ìŠµë‹ˆë‹¤ !!
              """)
    st.markdown("---")
    st.subheader('ìŠ¤ë§ˆíŠ¸í° ê³¼ì˜ì¡´ í˜„ìƒì´ ìœ ì•„ë“¤ì˜ ë°œë‹¬ì— ë¯¸ì¹˜ëŠ” ë¶€ì •ì ì¸ ì˜í–¥')
    st.write("""
1. ì°½ì˜ì ëŠ¥ë ¥ì´ ë–¨ì–´ì§€ê³ , ì¸ì§€ ë°œë‹¬ ì¸¡ë©´ì—ì„œ ìœ ì•„ê°€ ìŠ¤ë§ˆíŠ¸í°ì„ ê³¼ë„í•˜ê²Œ ì´ìš©í•œ ê²½ìš° ì£¼ì˜ì§‘ì¤‘ë ¥ ì €í•˜ í˜„ìƒì´ ë‚˜íƒ€ë‚œë‹¤.\n
2. ìœ ì•„ê¸°ì— ìŠ¤ë§ˆíŠ¸í° ê²Œì„ ê³¼ëª°ì…ì„ í•˜ê²Œë˜ë©´ ì¹œì‚¬íšŒì  í–‰ë™ì˜ ë°œë‹¬ê³¼ ë¬¸ì œí–‰ë™ì— ëŒ€í•œ ì´í•´ì— ë¶€ì •ì ì˜í–¥ì„ ë¯¸ì¹  ìˆ˜ ìˆë‹¤.\n
    ë˜í•œ, ìê¸°ì¡°ì ˆ ëŠ¥ë ¥ê³¼ ê³µê°ëŠ¥ë ¥ì´ ë‚®ì•„ì§€ê³  ê°ì •ì¡°ì ˆê³¼ ì¶©ë™ì–µì œê°€ í˜ë“¤ì–´ì§€ë©° ìê¸°ì¡´ì¤‘ê°ì— ë¶€ì •ì  ì˜í–¥ì„ ë¯¸ì¹˜ê²Œ ëœë‹¤.\n
3. ìŠ¤ë§ˆíŠ¸í° ê³¼ì˜ì¡´ì´ ì‹¬í•´ì§€ë©´ ìš°ìš¸,ë¶ˆì•ˆ ë“±ì˜ ì •ì‹ ì ì¸ ë¬¸ì œë„ ì¼ìœ¼í‚¬ ìˆ˜ ìˆë‹¤.\n
4. ìŠ¤ë§ˆíŠ¸ ê¸°ê¸°ì˜ í„°ì¹˜ ë° ëª¨ì…˜ì˜ ì œí•œì  ì‚¬ìš©ìœ¼ë¡œ ì¸í•´ ì‹œê°ì™¸ì˜ ì†Œê·¼ìœ¡ ì‚¬ìš©ì´ ì¤„ì–´ë“¤ì–´ ì‹ ì²´ì  ì„±ì¥ì— ë¶€ì •ì ì¸ ì˜í–¥ì„ ë¯¸ì¹  ìˆ˜ ìˆë‹¤.""")
    st.subheader('ë¶€ëª¨ê°€ í•  ìˆ˜ ìˆëŠ” ì˜ˆë°©ë²•')
    st.write("""
1. ìë…€ì—ê²Œ ìŠ¤ë§ˆíŠ¸í° ì‚¬ìš©ë°©ë²•ì„ ê°€ë¥´ì¹œë‹¤.\n
2. ìë…€ì˜ ìŠ¤ë§ˆíŠ¸í° ì‚¬ìš©ì‹œê°„ì„ ì œí•œí•œë‹¤.\n
3. ìë…€ì—ê²Œ ìŠ¤ë§ˆíŠ¸í° ì‚¬ìš©ì˜ ì¢‹ì€ì ê³¼ ë‚˜ìœì ì„ ë§í•´ì¤€ë‹¤.\n
4. ìë…€ê°€ ì‚¬ìš©í•  ìˆ˜ ìˆëŠ” íŠ¹ì •í•œ ìŠ¤ë§ˆíŠ¸í° ì•±ì´ë‚˜ ì‚¬ì´íŠ¸(ì„±ì¸ì‚¬ì´íŠ¸ë“±)ë¥¼ ì œí•œí•œë‹¤.
             """)
    st.subheader('ì†”ë£¨ì…˜')
    st.write('1. ì‚¬ìš©íšŸìˆ˜ ì œí•œğŸš¨: ì£¼ë‹¹ 1~2íšŒë¡œ ì œí•œí•˜ì—¬ì•¼ ê³¼ì˜ì¡´ ìœ„í—˜ì´ ê°ì†Œí•œë‹¤.\n 2. ìœ ì•„ì˜ ì‚¬ìš©ì‹œê°„ ì œí•œğŸ‘¶: ìœ ì•„ì˜ 1íšŒ í‰ê·  ìŠ¤ë§ˆíŠ¸í° ì‚¬ìš©ì‹œê°„ì„ 20ë¶„ ì´ë‚´ë¡œ ì œí•œí•˜ì—¬ì•¼ ê³¼ì˜ì¡´ ìœ„í—˜ì´ ê°ì†Œí•œë‹¤.\n 3. ë¶€ëª¨ì˜ ì‚¬ìš©ì‹œê°„ ì œí•œğŸ¤±: ë¶€ëª¨ì˜ ìŠ¤ë§ˆíŠ¸í° ì‚¬ìš©ì‹œê°„ì„ ì¡°ì ˆí•˜ì—¬ ìœ ì•„ì˜ ê³¼ì˜ì¡´ì„ ì˜ˆë°©í•´ì•¼í•œë‹¤.')
    
def solution_kids_normal():
    st.markdown("---")
    st.subheader("""
ì´ëŠ” ìŠ¤ë§ˆíŠ¸í° ì‚¬ìš©ì— ìˆì–´ ê· í˜• ì¡íŒ ìƒí™œì„ í•˜ê³  ìˆë‹¤ëŠ” ê²ƒì„ ì˜ë¯¸í•©ë‹ˆë‹¤.\n
ì•ìœ¼ë¡œë„ í˜„ì¬ì˜ ìƒíƒœë¥¼ ì˜ ìœ ì§€í•˜ì—¬ ê³¼ì˜ì¡´ ìœ„í—˜êµ°ì´ ë˜ì§€ ì•Šë„ë¡ ì£¼ì˜í•´ ì£¼ì„¸ìš”.\n
ìŠ¤ë§ˆíŠ¸í° ì‚¬ìš©ì„ ì ì ˆíˆ ì¡°ì ˆí•˜ë©° ê±´ê°•í•œ ë””ì§€í„¸ ë¼ì´í”„ë¥¼ ì´ì–´ê°€ì‹œê¸¸ ë°”ëë‹ˆë‹¤ ğŸ˜Š
               """)
    st.markdown("---")
    st.subheader('ìŠ¤ë§ˆíŠ¸í° ê³¼ì˜ì¡´ í˜„ìƒì´ ìœ ì•„ë“¤ì˜ ë°œë‹¬ì— ë¯¸ì¹˜ëŠ” ë¶€ì •ì ì¸ ì˜í–¥')
    st.write("""
1. ì°½ì˜ì ëŠ¥ë ¥ì´ ë–¨ì–´ì§€ê³ , ì¸ì§€ ë°œë‹¬ ì¸¡ë©´ì—ì„œ ìœ ì•„ê°€ ìŠ¤ë§ˆíŠ¸í°ì„ ê³¼ë„í•˜ê²Œ ì´ìš©í•œ ê²½ìš° ì£¼ì˜ì§‘ì¤‘ë ¥ ì €í•˜ í˜„ìƒì´ ë‚˜íƒ€ë‚œë‹¤.\n
2. ìœ ì•„ê¸°ì— ìŠ¤ë§ˆíŠ¸í° ê²Œì„ ê³¼ëª°ì…ì„ í•˜ê²Œë˜ë©´ ì¹œì‚¬íšŒì  í–‰ë™ì˜ ë°œë‹¬ê³¼ ë¬¸ì œí–‰ë™ì— ëŒ€í•œ ì´í•´ì— ë¶€ì •ì ì˜í–¥ì„ ë¯¸ì¹  ìˆ˜ ìˆë‹¤.\n
    ë˜í•œ, ìê¸°ì¡°ì ˆ ëŠ¥ë ¥ê³¼ ê³µê°ëŠ¥ë ¥ì´ ë‚®ì•„ì§€ê³  ê°ì •ì¡°ì ˆê³¼ ì¶©ë™ì–µì œê°€ í˜ë“¤ì–´ì§€ë©° ìê¸°ì¡´ì¤‘ê°ì— ë¶€ì •ì  ì˜í–¥ì„ ë¯¸ì¹˜ê²Œ ëœë‹¤.\n
3. ìŠ¤ë§ˆíŠ¸í° ê³¼ì˜ì¡´ì´ ì‹¬í•´ì§€ë©´ ìš°ìš¸,ë¶ˆì•ˆ ë“±ì˜ ì •ì‹ ì ì¸ ë¬¸ì œë„ ì¼ìœ¼í‚¬ ìˆ˜ ìˆë‹¤.\n
4. ìŠ¤ë§ˆíŠ¸ ê¸°ê¸°ì˜ í„°ì¹˜ ë° ëª¨ì…˜ì˜ ì œí•œì  ì‚¬ìš©ìœ¼ë¡œ ì¸í•´ ì‹œê°ì™¸ì˜ ì†Œê·¼ìœ¡ ì‚¬ìš©ì´ ì¤„ì–´ë“¤ì–´ ì‹ ì²´ì  ì„±ì¥ì— ë¶€ì •ì ì¸ ì˜í–¥ì„ ë¯¸ì¹  ìˆ˜ ìˆë‹¤.""")
    st.subheader('ë¶€ëª¨ê°€ í•  ìˆ˜ ìˆëŠ” ì˜ˆë°©ë²•')
    st.write("""
1. ìë…€ì—ê²Œ ìŠ¤ë§ˆíŠ¸í° ì‚¬ìš©ë°©ë²•ì„ ê°€ë¥´ì¹œë‹¤.\n
2. ìë…€ì˜ ìŠ¤ë§ˆíŠ¸í° ì‚¬ìš©ì‹œê°„ì„ ì œí•œí•œë‹¤.\n
3. ìë…€ì—ê²Œ ìŠ¤ë§ˆíŠ¸í° ì‚¬ìš©ì˜ ì¢‹ì€ì ê³¼ ë‚˜ìœì ì„ ë§í•´ì¤€ë‹¤.\n
4. ìë…€ê°€ ì‚¬ìš©í•  ìˆ˜ ìˆëŠ” íŠ¹ì •í•œ ìŠ¤ë§ˆíŠ¸í° ì•±ì´ë‚˜ ì‚¬ì´íŠ¸(ì„±ì¸ì‚¬ì´íŠ¸ë“±)ë¥¼ ì œí•œí•œë‹¤.
             """)
def solution_adult_teens_overdose():
    st.markdown("---")
    st.subheader("""
ì²­ì†Œë…„ê¸°ëŠ” ê°€ì¥ ê³¼ì˜ì¡´ ìœ„í—˜ì— ì·¨ì•½í•œ ì—°ë ¹ëŒ€ë¡œ ë”ìš± ë” ì£¼ì˜ê°€ í•„ìš”í•©ë‹ˆë‹¤.\n
ìŠ¤ë§ˆíŠ¸í° ì¤‘ë…ì—ëŠ” ì—¬ëŸ¬ê°€ì§€ ì´ìœ ê°€ ìˆì§€ë§Œ ìŠ¤ë§ˆíŠ¸í° ì‚¬ìš© ì‹œê°„ì„ ì¡°ì ˆí•˜ê³  ì·¨ë¯¸ë‚˜ ìš´ë™ì„ ì‹œì‘í•´ë³´ëŠ” ê²ƒì„ ì¶”ì²œë“œë¦½ë‹ˆë‹¤.\n
ê·¸ëŸ¼ ìŠ¤ë§ˆíŠ¸í° ê³¼ì˜ì¡´ì—ì„œ ë©€ì–´ì§ˆ ìˆ˜ ìˆì„ ê²ƒì…ë‹ˆë‹¤.\n 
ë‹¤ìŒì€ ì°¸ê³ í•˜ì‹¤ ìˆ˜ ìˆëŠ” ë°©ë²• ëª‡ê°€ì§€ë¥¼ ì•Œë ¤ë“œë¦¬ê² ìŠµë‹ˆë‹¤. ë„ì›€ì´ ë˜ì—ˆìœ¼ë©´ ì¢‹ê² ìŠµë‹ˆë‹¤!!
              """)
    st.markdown("---")
    st.subheader('ì˜ˆë°©ë²•')
    st.write("""
1. ìŠ¤ë§ˆíŠ¸í° ì‚¬ìš©ë°©ë²•ì„ ë°°ìš´ë‹¤.\n
2. ìŠ¤ë§ˆíŠ¸í° ì‚¬ìš©ì˜ ì¢‹ì€ì ê³¼ ë‚˜ìœì ì„ ì•Œì•„ë³¸ë‹¤.\n
3. í•¨ê»˜ ê°€ì¡±ì˜ ìŠ¤ë§ˆíŠ¸í° ì‚¬ìš©ê·œì¹™ì„ ë§Œë“¤ê³  ë‹¤ê°™ì´ ì§€í‚¤ë ¤ê³  ë…¸ë ¥í•œë‹¤.\n
4. ìœ ìµí•œ ì‚¬ì´íŠ¸ë‚˜ ì•±ì„ ê°™ì´ ì‚¬ìš©í•œë‹¤.
             """)
    st.subheader('ì†”ë£¨ì…˜')
    st.write("""
1. ì‚¬ìš©ì‹œê°„ ì¡°ì ˆâ°: ë¬´ì¡°ê±´ì ì¸ ì‚¬ìš©ê¸ˆì§€ ë³´ë‹¤ ì‚¬ìš©ì‹œê°„ ì¡°ì ˆì´ í•„ìš”í•˜ë‹¤.\n(ìì‹ ì—ê²Œ ì ì ˆí•œ ìŠ¤ë§ˆíŠ¸í° ì‚¬ìš©ì‹œê°„ì„ ë¯¸ë¦¬ ì •í•´ ì§€í‚¤ëŠ” ìŠµê´€ + ì¼ì •ì‹œê°„ë§Œ ìŠ¤ë§ˆíŠ¸í°ì„ ì‚¬ìš©í•  ìˆ˜ ìˆë„ë¡ ì„¤ì •í•˜ëŠ” ì•± í™œìš©)
2. ì™¸ë¶€í™œë™ ì¦ê¸°ê¸°ğŸƒâ€â™‚ï¸: ìŠ¤ë§ˆíŠ¸í° ì‚¬ìš©ì‹œê°„ì„ ì¤„ì´ê³  ì¹œêµ¬ë“¤ê³¼ ì„œë¡œ ì–´ìš¸ë ¤ ì‚¬íšŒì„±ì„ ë†’ì¼ ìˆ˜ ìˆëŠ” ì·¨ë¯¸ë‚˜ ìš´ë™ì„ ì‹œì‘í•œë‹¤.\n
3. ìê¸°í†µì œë ¥ ê¸°ë¥´ê¸°ğŸ§˜: ëª…í™•í•œ ëª©í‘œì„¤ì •, ì ì ˆí•œ ë³´ìƒ, ê¸ì •ì  ìì•„ëŒ€í™” ë“±ì„ í†µí•´ ìê¸°í†µì œë ¥ ê¸°ë¥¸ë‹¤.
             """)
    
def solution_adult_teens_normal():
    st.markdown("---")
    st.subheader("""
ì´ëŠ” ìŠ¤ë§ˆíŠ¸í° ì‚¬ìš©ì— ìˆì–´ ê· í˜• ì¡íŒ ìƒí™œì„ í•˜ê³  ìˆë‹¤ëŠ” ê²ƒì„ ì˜ë¯¸í•©ë‹ˆë‹¤.\n                    
í•˜ì§€ë§Œ ì²­ì†Œë…„ê¸°ëŠ” ê°€ì¥ ê³¼ì˜ì¡´ ìœ„í—˜ì— ì·¨ì•½í•œ ì—°ë ¹ëŒ€ì´ë¯€ë¡œ\n
ì•ìœ¼ë¡œë„ í˜„ì¬ì˜ ìƒíƒœë¥¼ ì˜ ìœ ì§€í•˜ì—¬ ê³¼ì˜ì¡´ ìœ„í—˜êµ°ì´ ë˜ì§€ ì•Šë„ë¡ ì£¼ì˜í•´ ì£¼ì„¸ìš”.\n
ìŠ¤ë§ˆíŠ¸í° ì‚¬ìš©ì„ ì ì ˆíˆ ì¡°ì ˆí•˜ë©° ê±´ê°•í•œ ë””ì§€í„¸ ë¼ì´í”„ë¥¼ ì´ì–´ê°€ì‹œê¸¸ë°”ëë‹ˆë‹¤ğŸ˜Š
              """)
    st.subheader('ì˜ˆë°©ë²•')
    st.write("""
1. ìŠ¤ë§ˆíŠ¸í° ì‚¬ìš©ë°©ë²•ì„ ë°°ìš´ë‹¤.\n
2. ìŠ¤ë§ˆíŠ¸í° ì‚¬ìš©ì˜ ì¢‹ì€ì ê³¼ ë‚˜ìœì ì„ ì•Œì•„ë³¸ë‹¤.\n
3. í•¨ê»˜ ê°€ì¡±ì˜ ìŠ¤ë§ˆíŠ¸í° ì‚¬ìš©ê·œì¹™ì„ ë§Œë“¤ê³  ë‹¤ê°™ì´ ì§€í‚¤ë ¤ê³  ë…¸ë ¥í•œë‹¤.\n
4. ìœ ìµí•œ ì‚¬ì´íŠ¸ë‚˜ ì•±ì„ ê°™ì´ ì‚¬ìš©í•œë‹¤.
             """)
def solution_adult_overdose():
    st.markdown("---")
    st.subheader("""
ìŠ¤ë§ˆíŠ¸í° ì¤‘ë…ì—ëŠ” ì—¬ëŸ¬ê°€ì§€ ì´ìœ ê°€ ìˆì§€ë§Œ ì‚¬íšŒê´€ê³„ì—ì„œ ë°›ëŠ” ìŠ¤íŠ¸ë ˆìŠ¤ë¥¼ ì¤„ì´ê³ ,\n 
ì·¨ë¯¸ë‚˜ ìš´ë™ì„ í†µí•´ì„œ ìŠ¤íŠ¸ë ˆìŠ¤ë¥¼ í•´ì†Œ í•´ë³´ëŠ”ê²ƒì„ ì¶”ì²œë“œë¦½ë‹ˆë‹¤.\n
ê·¸ëŸ¼ ìŠ¤ë§ˆíŠ¸í° ê³¼ì˜ì¡´ì—ì„œ ë©€ì–´ì§ˆ ìˆ˜ ìˆì„ ê²ƒì…ë‹ˆë‹¤.\n
ë‹¤ìŒì€ ì°¸ê³ í•˜ì‹¤ ìˆ˜ ìˆëŠ” ë°©ë²• ëª‡ê°€ì§€ë¥¼ ì•Œë ¤ë“œë¦¬ê² ìŠµë‹ˆë‹¤.\n
ë„ì›€ì´ ë˜ì—ˆìœ¼ë©´ ì¢‹ê² ìŠµë‹ˆë‹¤!!
              """)
    st.subheader('ì†”ë£¨ì…˜')
    st.write("""
1. ì˜ì‹ì ì¸ ìŠ¤ë§ˆíŠ¸í° ì‚¬ìš©â°: ìŠ¤ë§ˆíŠ¸í° ì‚¬ìš© ì‹œê°„ì„ ì˜ì‹ì ìœ¼ë¡œ ê´€ë¦¬í•˜ê³  ì œí•œí•˜ëŠ” ê²ƒì´ ì¤‘ìš”í•˜ë‹¤. ì‚¬ìš©í•˜ëŠ” ì•±ì´ë‚˜ ê¸°ëŠ¥ì— ëŒ€í•´ ìì£¼ ì§ˆë¬¸í•´ ë³´ë©´ì„œ ìì‹ ì´ ì–¼ë§ˆë‚˜ ë§ì€ ì‹œê°„ì„ ì†Œë¹„í•˜ê³  ìˆëŠ”ì§€ë¥¼ íŒŒì•…í•œë‹¤.\n
2. ë³´ìƒ ì²´ê³„ ì¬ì¡°ì •ğŸ§—â€â™‚ï¸: ìŠ¤ë§ˆíŠ¸í° ì‚¬ìš©ì— ë”°ë¥¸ ë³´ìƒì„ ë‹¤ë¥¸ ë°©ì‹ìœ¼ë¡œ ëŒ€ì²´í•  ìˆ˜ ìˆëŠ” ë°©ë²•ì„ ì°¾ì•„ë³¸ë‹¤. ì˜ˆë¥¼ ë“¤ì–´, ì·¨ë¯¸ë‚˜ ìš´ë™ê³¼ ê°™ì€ í™œë™ì„ í†µí•´ ë³´ìƒì„ ë°›ì„ ìˆ˜ ìˆë„ë¡ í•´ë³¸ë‹¤.\n
3. ê°ì • ê´€ë¦¬ğŸ‘Œ: ë¶€ì •ì ì¸ ê°ì •ì„ íšŒí”¼í•˜ì§€ ì•Šê³  ì§ë©´í•˜ê³  ì²˜ë¦¬í•  ìˆ˜ ìˆëŠ” ê¸°ìˆ ì„ í–¥ìƒì‹œí‚¨ë‹¤. ìŠ¤íŠ¸ë ˆìŠ¤ ê´€ë¦¬ ê¸°ìˆ ì„ ìµíˆê³ , ê°ì •ì„ í‘œí˜„í•˜ê³  ì´í•´í•˜ëŠ” ë°©ë²•ì„ ë°°ìš°ëŠ” ê²ƒì´ ë„ì›€ì´ ë  ìˆ˜ ìˆë‹¤.\n
4. ìê¸° ì¡°ì ˆë ¥ ê°•í™”ğŸ§˜: ìŠ¤ìŠ¤ë¡œì— ëŒ€í•œ ìê¸° ì¡°ì ˆë ¥ì„ ê°•í™”í•˜ê¸° ìœ„í•´ ëª…í™•í•œ ëª©í‘œë¥¼ ì„¤ì •í•˜ê³  ê·¸ ëª©í‘œë¥¼ ë‹¬ì„±í•˜ê¸° ìœ„í•œ ê³„íšì„ ì„¸ìš´ë‹¤. ì´ë¥¼ í†µí•´ ìê¸° ì¡°ì ˆë ¥ì„ ì—°ìŠµí•˜ê³  ê°•í™”í•  ìˆ˜ ìˆë‹¤.\n
5. ì·¨ë¯¸ë‚˜ ìš´ë™ğŸƒâ€â™‚ï¸: í‰ì†Œ ê´€ì‹¬ì´ ìˆëŠ” ë¶„ì•¼ë‚˜ í•´ë³´ê³  ì‹¶ì—ˆë˜ í™œë™ì„ ì‹œì‘í•˜ë©´ì„œ ê±´ê°•í•œ í•˜ë£¨ë¥¼ ë³´ë‚´ë³¸ë‹¤.\n
6. ì‹¬ë¦¬ì  ì§€ì› ë°›ê¸°ğŸ‘¨â€âš•ï¸: ë¶€ì •ì ì¸ ê°ì •ì´ë‚˜ ìê¸° ì¡°ì ˆì´ ì–´ë ¤ìš¸ ë•ŒëŠ” ì „ë¬¸ê°€ì˜ ë„ì›€ì„ ë°›ì•„ë³¸ë‹¤. ì‹¬ë¦¬ìƒë‹´ì´ë‚˜ í–‰ë™ ì¹˜ë£Œë¥¼ í†µí•´ ë¬¸ì œë¥¼ í•´ê²°í•  ìˆ˜ ìˆë‹¤.

             """)
def solution_adult_normal():
    st.markdown("---")
    st.subheader("""
ì´ëŠ” ìŠ¤ë§ˆíŠ¸í° ì‚¬ìš©ì— ìˆì–´ ê· í˜• ì¡íŒ ìƒí™œì„ í•˜ê³  ìˆë‹¤ëŠ” ê²ƒì„ ì˜ë¯¸í•©ë‹ˆë‹¤.\n 
ì•ìœ¼ë¡œë„ í˜„ì¬ì˜ ìƒíƒœë¥¼ ì˜ ìœ ì§€í•˜ì—¬ ê³¼ì˜ì¡´ ìœ„í—˜êµ°ì´ ë˜ì§€ ì•Šë„ë¡ ì£¼ì˜í•´ ì£¼ì„¸ìš”.\n 
ìŠ¤ë§ˆíŠ¸í° ì‚¬ìš©ì„ ì ì ˆíˆ ì¡°ì ˆí•˜ë©° ê±´ê°•í•œ ë””ì§€í„¸ ë¼ì´í”„ë¥¼ ì´ì–´ê°€ì‹œê¸¸ ë°”ëë‹ˆë‹¤ ğŸ˜Š
              """)
def solution_adult_senior_overdose():
    st.markdown("---")
    st.subheader("""
ìŠ¤ë§ˆíŠ¸í° ì¤‘ë…ì—ëŠ” ì—¬ëŸ¬ê°€ì§€ ì´ìœ ê°€ ìˆì§€ë§Œ, ìš°ìš¸ê°ê³¼ ë¬´ë ¥ê°ì´ ì¦ê°€í•˜ê¸° ë•Œë¬¸ì— ê·¸ëŸ´ ìˆ˜ ìˆìŠµë‹ˆë‹¤.\n
ìƒˆë¡œìš´ ê²½í—˜ê³¼ ë„ì „ì„ ì‹œë„í•´ ë³´ëŠ”ê²ƒì„ ì¶”ì²œë“œë¦½ë‹ˆë‹¤.\n
ê·¸ëŸ¼ ìŠ¤ë§ˆíŠ¸í° ê³¼ì˜ì¡´ì—ì„œ ë©€ì–´ì§ˆ ìˆ˜ ìˆì„ ê²ƒì…ë‹ˆë‹¤.\n 
ë‹¤ìŒì€ ì°¸ê³ í•˜ì‹¤ ìˆ˜ ìˆëŠ” ë°©ë²• ëª‡ê°€ì§€ë¥¼ ì•Œë ¤ë“œë¦¬ê² ìŠµë‹ˆë‹¤. ë„ì›€ì´ ë˜ì—ˆìœ¼ë©´ ì¢‹ê² ìŠµë‹ˆë‹¤ !!
              """)
    st.subheader('ì†”ë£¨ì…˜')
    st.write("""
1. ìš´ë™í•˜ê¸°ğŸƒâ€â™‚ï¸: ìš´ë™ì€ ìš°ìš¸ê°ì„ ì¤„ì´ê³  ì—ë„ˆì§€ë¥¼ íšŒë³µí•˜ëŠ”ë° ë„ì›€ì´ ëœë‹¤. ì‚°ì±…, ì¡°ê¹…, ìˆ˜ì˜, ìš”ê°€ ë“±ì˜ ìœ ì‚°ì†Œ ìš´ë™ì´ë‚˜ ê·¼ë ¥ ìš´ë™ì„ í†µí•´ ì‹ ì²´ í™œë™ì„ ì¦ê¸°ê³  ê±´ê°•ì„ ìœ ì§€í•œë‹¤.\n
2. ì •ê¸°ì ì¸ í™œë™ğŸ‘¨â€ğŸ‘©â€ğŸ‘§â€ğŸ‘¦: ì •ê¸°ì ìœ¼ë¡œ ê³„íšëœ í™œë™ì„ ê°€ì§€ê³  ìƒí™œí•˜ë©´ ë¬´ê¸°ë ¥ê°ì„ ê·¹ë³µí•  ìˆ˜ ìˆë‹¤. ì˜ˆë¥¼ ë“¤ì–´, ì·¨ë¯¸í™œë™ì´ë‚˜ ë™í˜¸íšŒ ì°¸ì—¬, ë´‰ì‚¬í™œë™ ë“±ì„ í†µí•´ ìì‹ ì„ í™œë°œí•˜ê²Œ ìœ ì§€í•œë‹¤.\n
3. ì‚¬íšŒì  êµë¥˜ğŸ—£ï¸: ì¹œêµ¬ë‚˜ ê°€ì¡±ê³¼ì˜ ë§Œë‚¨ì´ë‚˜ ì‚¬íšŒì ì¸ í™œë™ì„ í†µí•´ ìš°ìš¸ê°ì„ ì¤„ì¼ ìˆ˜ ìˆë‹¤. ì‚¬ë‘ê³¼ ì§€ì§€ë¥¼ ë°›ìœ¼ë©´ì„œ ëŒ€í™”í•˜ê³  ë‚˜ëˆ”ì„ í†µí•´ ê¸ì •ì ì¸ ì •ì„œë¥¼ ìœ ì§€í•œë‹¤.\n
4. ì •ì„œì  ì§€ì›ğŸ‘¨â€âš•ï¸: ìš°ìš¸ê°ê³¼ ë¬´ê¸°ë ¥ê°ì„ í•´ì†Œí•˜ê¸° ìœ„í•´ ì „ë¬¸ê°€ì˜ ë„ì›€ì„ ë°›ì„ ìˆ˜ ìˆë‹¤. ì •ì‹ ê±´ê°• ì „ë¬¸ê°€ì™€ì˜ ìƒë‹´ì´ë‚˜ ì¹˜ë£Œë¥¼ í†µí•´ ë¬¸ì œì— ëŒ€í•œ í•´ê²°ì±…ì„ ì°¾ì„ ìˆ˜ ìˆë‹¤.\n
5. ìê¸° ê´€ë¦¬ğŸ˜´: ì¶©ë¶„í•œ íœ´ì‹ê³¼ ìˆ˜ë©´ì„ ì·¨í•˜ê³  ê±´ê°•í•œ ì‹ìŠµê´€ì„ ìœ ì§€í•œë‹¤. ìŠ¤íŠ¸ë ˆìŠ¤ë¥¼ ê´€ë¦¬í•˜ê³  ê¸ì •ì ì¸ ìƒê°ì„ ìœ ì§€í•˜ëŠ” ê²ƒì´ ì¤‘ìš”í•˜ë‹¤.\n
6. ìƒˆë¡œìš´ ê²½í—˜ê³¼ ë„ì „ğŸ§—â€â™‚ï¸: ìƒˆë¡œìš´ ì·¨ë¯¸ë‚˜ í™œë™ì„ ì‹œì‘í•˜ê±°ë‚˜ ë„ì „ì ì¸ ëª©í‘œë¥¼ ì„¸ìš°ëŠ” ê²ƒì€ ìì‹ ê°ì„ í‚¤ìš°ê³  ìš°ìš¸ê°ì„ ê·¹ë³µí•˜ëŠ” ë° ë„ì›€ì´ ëœë‹¤.\n
7. ì»¤ë®¤ë‹ˆí‹° ì„¼í„° í”„ë¡œê·¸ë¨ğŸ«: ì§€ì—­ ì‚¬íšŒì—ì„œ ìš´ì˜í•˜ëŠ” ë‹¤ì–‘í•œ í”„ë¡œê·¸ë¨ì— ì°¸ì—¬í•˜ì—¬ ìƒˆë¡œìš´ ì‚¬ëŒë“¤ê³¼ êµë¥˜í•  ìˆ˜ ìˆë‹¤. ì´ëŠ” ê³ ë¦½ê°ì„ ì¤„ì´ê³  ì‚¬íšŒì  ìœ ëŒ€ë¥¼ ê°•í™”í•˜ëŠ” ë° ë„ì›€ì„ ì¤€ë‹¤.
             """)
def solution_adult_senior_normal():
    st.markdown("---")
    st.subheader("""
ìŠ¤ë§ˆíŠ¸í° ì‚¬ìš©ì— ìˆì–´ ê· í˜• ì¡íŒ ìƒí™œì„ í•˜ê³  ìˆë‹¤ëŠ” ê²ƒì„ ì˜ë¯¸í•©ë‹ˆë‹¤.\n
ì•ìœ¼ë¡œë„ í˜„ì¬ì˜ ìƒíƒœë¥¼ ì˜ ìœ ì§€í•˜ì—¬ ê³¼ì˜ì¡´ ìœ„í—˜êµ°ì´ ë˜ì§€ ì•Šë„ë¡ ì£¼ì˜í•´ ì£¼ì„¸ìš”.\n 
ìŠ¤ë§ˆíŠ¸í° ì‚¬ìš©ì„ ì ì ˆíˆ ì¡°ì ˆí•˜ë©°, ê±´ê°•í•œ ë””ì§€í„¸ ë¼ì´í”„ë¥¼ ì´ì–´ê°€ì‹œê¸¸ ë°”ëë‹ˆë‹¤ ğŸ˜Š
              """)

# ---------------------------------ì¶œë ¥ ì½”ë“œ-----------------------------------------  

if 'total_score' not in st.session_state:
    st.session_state.total_score = 0

if 'total_score_adult' not in st.session_state:
    st.session_state.total_score_adult = 0

if total_score :
    overdose_kids(total_score)
    dash_kids()
else :
    if age >= 9 and age <= 24:
        overdose_adult_teen(total_score_adult)
        dash_adult_teens()
    elif age > 24 and age < 60:
        overdose_adult(total_score_adult)
        dash_adult()
    elif age >= 60:
        overdose_adult_senior(total_score_adult)
        dash_adult_senior()


#------------------------------- ai ì´ë¯¸ì§€ ì¶œë ¥ ì½”ë“œ----------------------------------------
# client = openai_api_key = st.secrets["openapi_key"]["OPENAPI_KEY"]

# if total_score >= 24:  # ê³¼ì˜ì¡´ ìœ„í—˜êµ°ì¸ ê²½ìš°ì—ë§Œ ì´ë¯¸ì§€ ìƒì„±
#     prompt = "ë‚˜ì´ê°€ " + str(age) + "ì‚´ì´ê³  ìŠ¤ë§ˆíŠ¸í°ì— ì¤‘ë…ë˜ì–´ì„œ í—ˆë¦¬ê°€ êµ½ì—ˆê³  ë‹¤í¬ì„œí´ì´ í„±ê¹Œì§€ ë‚´ë ¤ì™€ì„œ íì¸ì´ ë˜ì–´ë²„ë¦° " + sex + "ìë¥¼ ì™„ì „ ë¬´ì„­ê³  ê³¼ì¥í•´ì„œ ê·¸ë ¤ì¤˜"
#     response = client.images.generate(model="dall-e-3", prompt=prompt, size="1024x1024", quality="standard", n=1)

#     image_url = response.data[0].url

#     # ì´ë¯¸ì§€ë¥¼ ê°€ì ¸ì™€ì„œ Streamlitì— í‘œì‹œ
#     image = Image.open(requests.get(image_url, stream=True).raw)
#     st.subheader('ë‹¹ì‹ ì˜ ë¯¸ë˜ëª¨ìŠµ..')
#     st.image(image, caption='Generated Image', use_column_width=True)

# if total_score_adult >= 24:  # ê³¼ì˜ì¡´ ìœ„í—˜êµ°ì¸ ê²½ìš°ì—ë§Œ ì´ë¯¸ì§€ ìƒì„±
#     prompt = "ë‚˜ì´ê°€ " + str(age) + "ì‚´ì´ê³  ìŠ¤ë§ˆíŠ¸í°ì— ì¤‘ë…ë˜ì–´ì„œ í—ˆë¦¬ê°€ êµ½ì—ˆê³  ë‹¤í¬ì„œí´ì´ í„±ê¹Œì§€ ë‚´ë ¤ì™€ì„œ íì¸ì´ ë˜ì–´ë²„ë¦° " + sex + "ìë¥¼ ì™„ì „ ë¬´ì„­ê³  ê³¼ì¥í•´ì„œ ê·¸ë ¤ì¤˜"
#     response = client.images.generate(model="dall-e-3", prompt=prompt, size="1024x1024", quality="standard", n=1)

#     image_url = response.data[0].url

#     # ì´ë¯¸ì§€ë¥¼ ê°€ì ¸ì™€ì„œ Streamlitì— í‘œì‹œ
#     image = Image.open(requests.get(image_url, stream=True).raw)
#     st.subheader('ë‹¹ì‹ ì˜ ë¯¸ë˜ëª¨ìŠµ..')
#     st.image(image, caption='Generated Image', use_column_width=True)

if total_score :
    if total_score >= 24:
        solution_kids_overdose()
    elif total_score < 24:
        solution_kids_normal()
else :
    if (age > 9 and age <= 19) and (total_score_adult >= 23):
        solution_adult_teens_overdose()
    elif (age > 9 and age <= 19) and (total_score_adult < 23):
        solution_adult_teens_normal()
    elif (age > 24 and age < 60) and (total_score_adult >= 24):
        solution_adult_overdose()
    elif (age > 24 and age < 60) and (total_score_adult < 24):
        solution_adult_normal()
    elif (age > 60) and (total_score_adult >= 24):
        solution_adult_senior_overdose()
    elif (age > 60) and (total_score_adult < 24):
        solution_adult_senior_normal()
st.markdown("---")
st.page_link("pages/final.py", label="ë§ˆì§€ë§‰ê°€ê¸°", icon="âœ”ï¸")
